<article>

<h1>Mémo juliette<h1>

<h2>Contexte</h2

Travail sur base de donnes de logiciel SQL Server

<h2>pb 1 : mettre à jour la colonne d'une table erronée</h2>




SELECT  [Numid]
      ,[Date]
      ,[Heure]
      ,[Minute]
      ,[Problème]
      ,[Obs]
      ,[Etoile]
      ,[Interven]
      ,[Instruct]
      ,[Validité]
      ,[Code]
      ,[Horspatien]
      ,[Codecibl]
      ,[Definitif]
      ,[Confiden]
      ,[Horsfamill]
      ,[Dat_barre]
      ,[Pk_obside]
      <B>,[donnees]
      ,[actions]
      ,[resultats]</B>
      ,[fkparent]
      ,[notlast]
      ,[dateevt]
  FROM [SSP_PARIS_OSIRIS].[dbo].[OBSIDE] where date> '2017-05-01'
  
  Résultat : {\rtf1\ansi\ansicpg1252\deff0\deflang1036{\fonttbl{\f0\fnil\fcharset0 Arial;}{\f1\fnil Arial;}}
\viewkind4\uc1\pard\fs22 Change de protection , pas de selles ,urines++ mis en pyjama.\f1\par
}

Il y a des caractères d'encodage rtf

<h2>Objectif</h2>

Supprimer les caractères rtf.


  
<h2>Comment faire ?</h2>  



<h3>En java</h3>
 <code>

public class Clean(){
	
	
	
	// 1. Lecture de la table
	// ouverture connexion à la base
	// adresse - login - mdp
	// ... j'ai ma connection (avec droit lecture & update 


	// 2. Itération sur les lignes
	
	for (String valAvecFormatRtf:liste){
		
		
		String valClean = clean(valAvecFormatRtf);
		
		update(idLigne, valClean);
		
		
		
	}
		
	
	
	
	String clean(String str){
		
		return "nettoyer";
		
	}
	

	void update(long idLigne, String val){
		
		// excute UPDATE obside SET donnees = ' + val + ' WHERE id = ' + idLigne;
	}
	
	
}
</code>
 </article>